package helloavm;

import org.web3j.abi.TypeReference;
import org.web3j.abi.datatypes.Function;
import org.web3j.abi.datatypes.Type;
import org.web3j.abi.datatypes.Utf8String;
import org.web3j.aion.tx.AionContract;
import org.web3j.crypto.Credentials;
import org.web3j.protocol.Web3j;
import org.web3j.protocol.core.RemoteCall;
import org.web3j.protocol.core.methods.response.TransactionReceipt;
import org.web3j.tx.TransactionManager;
import org.web3j.tx.gas.ContractGasProvider;

import java.util.Arrays;
import java.util.Collections;

public class HelloAvm extends AionContract {
    private static final String BINARY = "6050604052602060405190810160405280600981526010016f48656c6c6f2041564d0000000000000081526010015060006000509080519060100190610046929190610058565b5034156100535760006000fd5b61010a565b8280546001816001161561010002031660029004906000526010600020905090600f016010900481019282600f1061009b57805160ff19168380011785556100ce565b828001600101855582156100ce579182015b828111156100cd57825182600050909055916010019190600101906100ad565b5b5090506100db91906100df565b5090565b61010791906100e9565b8082111561010357600081815060009055506001016100e9565b5090565b90565b6105f1806101196000396000f30060506040526000356c01000000000000000000000000900463ffffffff1680637fcaf6661461005457806389ea642f146100b6578063ead710c414610146578063ef5fb05b146102225761004e565b60006000fd5b34156100605760006000fd5b6100b46004808035906010019082018035906010019191908080600f016010809104026010016040519081016040528093929190818152601001838380828437820191505050505050909091905050610238565b005b34156100c25760006000fd5b6100ca610256565b6040518080601001828103825283818151815260100191508051906010019080838360005b8381101561010b5780820151818401525b6010810190506100ef565b50505050905090810190600f1680156101385780820380516001836010036101000a031916815260100191505b509250505060405180910390f35b34156101525760006000fd5b6101a66004808035906010019082018035906010019191908080600f016010809104026010016040519081016040528093929190818152601001838380828437820191505050505050909091905050610308565b6040518080601001828103825283818151815260100191508051906010019080838360005b838110156101e75780820151818401525b6010810190506101cb565b50505050905090810190600f1680156102145780820380516001836010036101000a031916815260100191505b509250505060405180910390f35b341561022e5760006000fd5b610236610355565b005b80600060005090805190601001906102519291906104e5565b505b50565b61025e61056c565b60006000508054600181600116156101000203166002900480600f0160108091040260100160405190810160405280929190818152601001828054600181600116156101000203166002900480156102f95780600f106102cc576101008083540402835291601001916102f9565b8201919060005260106000209050905b8154815290600101906010018083116102dc57829003600f168201915b50505050509050610305565b90565b61031061056c565b610349602060405190810160405280600681526010016f48656c6c6f20000000000000000000008152601001508361035863ffffffff16565b9050610350565b919050565b5b565b61036061056c565b610368610583565b610370610583565b61037861056c565b610380610583565b60006000889550879450845186510160405180591061039c5750595b9080825280601002601001820160405280156103b3575b50935083925060009150600090505b85518110156104465785818151811015156103d957fe5b9060100101516f0100000000000000000000000000000090046f0100000000000000000000000000000002838380600101945081518110151561041857fe5b9060100101906effffffffffffffffffffffffffffff1916908160001a9053505b80806001019150506103c2565b6000905080505b84518110156104d157848181518110151561046457fe5b9060100101516f0100000000000000000000000000000090046f010000000000000000000000000000000283838060010194508151811015156104a357fe5b9060100101906effffffffffffffffffffffffffffff1916908160001a9053505b808060010191505061044d565b8296506104d9565b50505050505092915050565b8280546001816001161561010002031660029004906000526010600020905090600f016010900481019282600f1061052857805160ff191683800117855561055b565b8280016001018555821561055b579182015b8281111561055a578251826000509090559160100191906001019061053a565b5b509050610568919061059a565b5090565b601060405190810160405280600081526010015090565b601060405190810160405280600081526010015090565b6105c291906105a4565b808211156105be57600081815060009055506001016105a4565b5090565b905600a165627a7a72305820950ca42621a5fcb9fe851ae36c41a8c02dcaa560ade1647b02516456ee70a4b30029";

    public static final String FUNC_SETSTRING = "setString";

    public static final String FUNC_GETSTRING = "getString";

    public static final String FUNC_GREET = "greet";

    public static final String FUNC_SAYHELLO = "sayHello";

    protected HelloAvm(String contractAddress, Web3j web3j, Credentials credentials, ContractGasProvider contractGasProvider) {
        super(BINARY, contractAddress, web3j, credentials, contractGasProvider);
    }

    protected HelloAvm(String contractAddress, Web3j web3j, TransactionManager transactionManager, ContractGasProvider contractGasProvider) {
        super(BINARY, contractAddress, web3j, transactionManager, contractGasProvider);
    }

    public RemoteCall<TransactionReceipt> setString(String newStr) {
        final Function function = new Function(
                FUNC_SETSTRING,
                Arrays.<Type>asList(new Utf8String(newStr)),
                Collections.<TypeReference<?>>emptyList());
        return executeRemoteCallTransaction(function);
    }

    public RemoteCall<String> getString() {
        final Function function = new Function(FUNC_GETSTRING,
                Arrays.<Type>asList(),
                Arrays.<TypeReference<?>>asList(new TypeReference<Utf8String>() {
                }));
        return executeRemoteCallSingleValueReturn(function, String.class);
    }

    public RemoteCall<String> greet(String _greet) {
        final Function function = new Function(FUNC_GREET,
                Arrays.<Type>asList(new Utf8String(_greet)),
                Arrays.<TypeReference<?>>asList(new TypeReference<Utf8String>() {
                }));
        return executeRemoteCallSingleValueReturn(function, String.class);
    }

    public void sayHello() {
        throw new RuntimeException("cannot call constant function with void return type");
    }

    public static HelloAvm load(String contractAddress, Web3j web3j, Credentials credentials, ContractGasProvider contractGasProvider) {
        return new HelloAvm(contractAddress, web3j, credentials, contractGasProvider);
    }

    public static HelloAvm load(String contractAddress, Web3j web3j, TransactionManager transactionManager, ContractGasProvider contractGasProvider) {
        return new HelloAvm(contractAddress, web3j, transactionManager, contractGasProvider);
    }

    public static RemoteCall<HelloAvm> deploy(Web3j web3j, Credentials credentials, ContractGasProvider contractGasProvider) {
        return deployRemoteCall(HelloAvm.class, web3j, credentials, contractGasProvider, BINARY, "");
    }

    public static RemoteCall<HelloAvm> deploy(Web3j web3j, TransactionManager transactionManager, ContractGasProvider contractGasProvider) {
        return deployRemoteCall(HelloAvm.class, web3j, transactionManager, contractGasProvider, BINARY, "");
    }
}
